<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"global.html":{"id":"global.html","title":"Global","body":" Document Management System Global decryptdecryptJwtencryptencryptJwtfilterDocumentDetailsfilterDocumentsByAccessfilterUserDetailsjwtEncodemessagenormalizePortonErroronListeningshowDocumentDetailsshowUserDetailsswapuniqueArrayUservalidateDocumentKeysvalidateUserKeys Global Members &lt;constant&gt; User User controller object Methods decrypt(encrypted, password) Function to decrypt a password encrypted using bcrypt Parameters: Name Type Description encrypted String the encrypted password password String the validating password Returns: the decrypted password Type String decryptJwt(reverseToken) Function to decrypt the encrypted jwt token Parameters: Name Type Description reverseToken String the encoded jwt token Returns: the decrypted token Type Object encrypt(text, password) Function to encrypt a password Parameters: Name Type Description text String the string to be encrypted password String the encryption password Returns: an encrypted password string Type String encryptJwt(token) Function to encrypt a jwt strinh Parameters: Name Type Description token String the jwt token Returns: the encoded jwt string Type String filterDocumentDetails() Filter for document details search Returns: array of filter Type Object filterDocumentsByAccess(access) Function to filter documents by access Parameters: Name Type Description access String the access level Returns: the access level if valid Type Object undefined if an invalid access is supplied Type Object filterUserDetails() Filter for user details search Returns: array of filter Type Object jwtEncode() Function to create a jwt encoder object Returns: the jwt encoder object Type Object message(results, request, response) Function to return a response message Parameters: Name Type Description results Object the result object request Object the request object response Object the response object Returns: a response json object Type Object normalizePort(val) Normalize a port into a number, string, or false. Parameters: Name Type Description val Number a string or number port Returns: a number representing the port Type Number normalizePort(val) Normalize a port into a number, string, or false. Parameters: Name Type Description val Number a string or number port Returns: a number representing the port Type Number onError(error) Event listener for HTTP server &quot;error&quot; event. Parameters: Name Type Description error any an error message Returns: error already thrown Type null onError(error) Event listener for HTTP server &quot;error&quot; event. Parameters: Name Type Description error any an error message Returns: error already thrown Type null onListening() Event listener for HTTP server &quot;listening&quot; event. Returns: server process is continous here, so no returns Type null onListening() Event listener for HTTP server &quot;listening&quot; event. Returns: server process is continous here, so no returns Type null showDocumentDetails(document) Function to display user details Parameters: Name Type Description document String document object Returns: user Type Object showUserDetails(user) Function to display user details Parameters: Name Type Description user String user object Returns: user Type Object swap(json) Function to create a reverse object from an object Parameters: Name Type Description json Object a valid json object Returns: the reverse object Type Object uniqueArray(array) Function to generate a unique array from an array Parameters: Name Type Description array Object the supplied array Returns: the filtered array Type Object validateDocumentKeys(request, isUpdate) Function to validate request body keys Parameters: Name Type Description request Object request body object isUpdate Boolean switch for when user is admin Returns: array constaining validity and invalid keys Type Object validateUserKeys(request, isAdmin) Function to validate request body keys Parameters: Name Type Description request Object request body object isAdmin Boolean switch for when user is admin Returns: array constaining validity and invalid keys Type Object × Search results Close "},"index.html":{"id":"index.html","title":"Index","body":" Document Management System Global decryptdecryptJwtencryptencryptJwtfilterDocumentDetailsfilterDocumentsByAccessfilterUserDetailsjwtEncodemessagenormalizePortonErroronListeningshowDocumentDetailsshowUserDetailsswapuniqueArrayUservalidateDocumentKeysvalidateUserKeys Document Management System API Document Management System provides a restful API for users to create and manage documents giving different privileges based on user roles and managing authentication using JWT. The API has routes, each dedicated to a single task that uses HTTP response codes to indicate API status and errors. FeaturesAuthenticationUsers are assigned a token when signup or signin. This token is needed for subsequent HTTP requests to the API for authentication and can be attached as values to the header's x-acess-token key. API requests made without authentication will fail with the status code of 401. It uses JWT for authentication. It generates a token and returns to the client. It verifies the token on every request to authenticated endpoints. Users It allows users to be created. It sets a newly created user's roleÌd to 1(a regular user) by default. Admin users are assigned a roleId of 0. It allows the created user and the admin to edit, and update thier information. All registered users can be retrieved by the admin user. Roles It ensures that users have a role. It ensures users roleId could be 0(admin) or 1(regular user). It allows an admin to update a user's role. Documents It allows new documents to be created/saved by users. It ensures all documents have an access defined (default access is private). It allows only admin users to retrieve all documents regardless of the document access. It ensures that only the user can retrieve their private documents. It ensures only authenticated users can delete, edit and update documents they own. It allows admin to delete any document regardless of the document access level. API Endpoints And Functions EndPoints Functionality POST /login Logs a user in. POST /logout Logs a user out. POST /api/v1/users/ Creates a new user. GET /api/v1/users/ Find matching instances of user. GET /api/v1/users/:id Find user. PATCH /api/v1/users/:id Update user attributes. DELETE /api/v1/users/:id Delete user. POST /api/v1/documents/ Creates a new document instance. GET /api/v1/documents/ Find matching instances of document. GET /api/v1/documents?offset=:offset Find matching instances of document with an offset. GET /api/v1/documents?limit=:limit Find matching instances of document with a limit between 1 and 10 GET /api/v1/documents/:id Find document. PATCH /api/v1/documents/:id Update document attributes. DELETE /api/v1/documents/:id Delete document. GET /api/v1/documents/user/:id Find all documents belonging to the user. GET /api/v1/search/users/:user Gets all users with usernames or emails matching the search user query GET /api/v1/search/documents?phrase=:phrase Get all documents with title or excerpt containing the search phrase GET /api/v1/search/documents?phrase=:phrase&amp;access=:access Get all document owned or accessible by userId with title containing the search phrase Sample API Request And ResponseUsers EndPointCreate UserCreate User Request Body Endpoint: POST: api/v1/users Body (application/json) { &quot;username&quot;: &quot;uniqueuser&quot;, &quot;firstname&quot;: &quot;Unique User&quot;, &quot;lastname&quot;: &quot;lastname&quot;, &quot;email&quot;: &quot;uniqueuser@unique.com&quot;, &quot;RoleId&quot;: 1, &quot;password&quot;: &quot;password&quot;, &quot;password_confirmation&quot;: &quot;password&quot; }Create User Response Body Status: 200 Body (application/json) { &quot;success&quot;: true, &quot;message&quot;: { &quot;id&quot;: 141, &quot;username&quot;: &quot;uniqueuser&quot;, &quot;firstname&quot;: &quot;Unique User&quot;, &quot;lastname&quot;: &quot;lastname&quot;, &quot;email&quot;: &quot;uniqueuser@unique.com&quot;, &quot;roleId&quot;: 1 } }Get UsersGet Users Request Body Endpoint: GET: api/v1/users Requires: Authentication, Admin Role Get Users Response Body Status: 200 Body (application/json) [{ &quot;id&quot;: 140, &quot;username&quot;: &quot;username&quot;, &quot;firstname&quot;: &quot;firstname&quot;, &quot;lastname&quot;: &quot;lastname&quot;, &quot;email&quot;: &quot;email@host.com&quot;, &quot;roleId&quot;: 1 }, { &quot;id&quot;: 141, &quot;username&quot;: &quot;uniqueuser&quot;, &quot;firstname&quot;: &quot;firstname&quot;, &quot;lastname&quot;: &quot;hello&quot;, &quot;email&quot;: &quot;uniqueuser@unique.com&quot;, &quot;roleId&quot;: 1 }]Documents EndpointGet All DocumentsGet All Documents Request Body Endpoint: GET: /api/v1/documents Requires: Authentication, Admin Role Get All DOcuments Response Body Status: 200 Body (application/json) [{ &quot;id&quot;: 45, &quot;title&quot;: &quot;Another new document&quot;, &quot;content&quot;: &quot;Test Epic things like lorem etc&quot;, &quot;excerpt&quot;: &quot;Test Epic things like lorem etc&quot;, &quot;access&quot;: &quot;public&quot;, &quot;creatorId&quot;: 29, &quot;createdAt&quot;: &quot;2017-02-17T17:40:45.146Z&quot;, &quot;updatedAt&quot;: &quot;2017-02-17T17:40:45.146Z&quot; }, { &quot;id&quot;: 44, &quot;title&quot;: &quot;New Title&quot;, &quot;content&quot;: &quot;The unique content of a document does not lie in the presence of the word unique&quot;, &quot;excerpt&quot;: &quot;Test Epic things like lorem etc&quot;, &quot;access&quot;: &quot;private&quot;, &quot;creatorId&quot;: 1, &quot;createdAt&quot;: &quot;2017-02-06T22:55:43.747Z&quot;, &quot;updatedAt&quot;: &quot;2017-02-06T22:55:43.747Z&quot; }]Create DocumentCreate Document Request Body Endpoint: POST: /api/v1/documents Requires: Authentication Body (application/json) { &quot;title&quot;: &quot;Just a Title&quot;, &quot;excerpt&quot;: &quot;Test Epic things like lorem etc&quot;, &quot;content&quot;: &quot;This placeholder should not always be a lorem generated document&quot;, &quot;creatorId&quot;: 1, &quot;access&quot;: &quot;user&quot; }Create Document Response Body Status: 201: Created Body (application/json) { &quot;id&quot;: 1, &quot;title&quot;: &quot;Just a Title&quot;, &quot;excerpt&quot;: &quot;Test Epic things like lorem etc&quot;, &quot;content&quot;: &quot;This placeholder should not always be a lorem ipsum generated document&quot;, &quot;creatorId&quot;: 1, &quot;access&quot;: &quot;user&quot;, &quot;createdAt&quot;: &quot;2017-02-05T05:51:51.217Z&quot;, &quot;updatedAt&quot;: &quot;2016-02-05T05:51:51.217Z&quot; }Get DocumentGet Docucment Request Body Endpoint: GET: /api/v1/documents/:id Requires: Authentication Get Document Response Body Status: 200: OK Body (application/json) { &quot;id&quot;: 1, &quot;title&quot;: &quot;Just a Title&quot;, &quot;excerpt&quot;: &quot;Test Epic things like lorem etc&quot;, &quot;content&quot;: &quot;This placeholder should not always be a lorem ipsum generated document&quot;, &quot;creatorId&quot;: 1, &quot;access&quot;: &quot;private&quot;, &quot;createdAt&quot;: &quot;2017-02-05T05:51:51.217Z&quot;, &quot;updatedAt&quot;: &quot;2016-02-05T05:51:51.217Z&quot; }Edit DocumentEdit Document Request Body Endpoint: PATCH: /api/v1/documents/:id Requires: Authentication Body (application/json): { &quot;title&quot;: &quot;Updated Title&quot;, }Edit Document Response Body Status: 200 Body (application/json) { &quot;id&quot;: 1, &quot;title&quot;: &quot;Updated Title&quot;, &quot;excerpt&quot;: &quot;Test Epic things like lorem etc&quot;, &quot;content&quot;: &quot;This placeholder should not always be a lorem ipsum generated document&quot;, &quot;creatorId&quot;: 1, &quot;access&quot;: &quot;private&quot;, &quot;createdAt&quot;: &quot;2017-02-05T05:51:51.217Z&quot;, &quot;updatedAt&quot;: &quot;2016-02-05T05:51:51.217Z&quot; }Delete DocumentDelete Document Request Body Endpoint: DELETE: /api/v1/documents/:id Requires: Authentication Delete Document Response Body Status: 200 Body (application/json) { &quot;success&quot;: true, &quot;message&quot;: &quot;Document with id:42 deleted&quot; }SearchDocuments SearchDocuments Search Request Body Endpoint: GET: /api/v1/search/documents?phrase=:phrase Requires: Authentication Documents Search Response Body Status: 200: OK Body (application/json) [{ &quot;id&quot;: 45, &quot;title&quot;: &quot;Another new document&quot;, &quot;content&quot;: &quot;Test Epic things like lorem etc&quot;, &quot;excerpt&quot;: &quot;Test Epic things like lorem etc&quot;, &quot;access&quot;: &quot;public&quot;, &quot;creatorId&quot;: 29, &quot;createdAt&quot;: &quot;2017-02-17T17:40:45.146Z&quot;, &quot;updatedAt&quot;: &quot;2017-02-17T17:40:45.146Z&quot; }, { &quot;id&quot;: 44, &quot;title&quot;: &quot;New Title&quot;, &quot;excerpt&quot;: &quot;Test Epic things like lorem etc&quot;, &quot;content&quot;: &quot;The unique content of a document does not lie in the presence of the word unique&quot;, &quot;access&quot;: &quot;1&quot;, &quot;creatorId&quot;: 1, &quot;createdAt&quot;: &quot;2017-02-06T22:55:43.747Z&quot;, &quot;updatedAt&quot;: &quot;2017-02-06T22:55:43.747Z&quot; }]Users SearchUsers Search Request Body Endpoint: GET: /api/v1/search/users?user:user Requires: Authentication, Admin Role Users Search Response Body Status: 200: OK Body (application/json) [{ &quot;id&quot;: 140, &quot;username&quot;: &quot;username&quot;, &quot;firstname&quot;: &quot;firstname&quot;, &quot;lastname&quot;: &quot;lastname&quot;, &quot;email&quot;: &quot;email@host.com&quot;, &quot;roleId&quot;: 1, &quot;createdAt&quot;: &quot;2017-02-17T19:41:30.837Z&quot;, &quot;updatedAt&quot;: &quot;2017-02-17T19:41:30.837Z&quot; }, { &quot;id&quot;: 141, &quot;username&quot;: &quot;uniqueuser&quot;, &quot;firstname&quot;: &quot;teller&quot;, &quot;lastname&quot;: &quot;soloing&quot;, &quot;email&quot;: &quot;uniqueuser@unique.com&quot;, &quot;roleId&quot;: 1, &quot;createdAt&quot;: &quot;2017-02-19T17:34:19.992Z&quot;, &quot;updatedAt&quot;: &quot;2017-02-19T17:34:19.992Z&quot; }] Technologies Used JavaScript (ES6) Node.js Express Mysql Sequelize ORM. Local DevelopmentPrerequisite Installations Msql and Node.js &gt;= v6.8.0. Procedure Clone this repository from a terminal git clone git@github.com:andela-venogwe/docman.git. Move into the project directory cd docman Install project dependencies npm install Start the express server npm start. Run test npm test. Postman Collection Create a Postman environment and set url and token variables. DeploymentDeploy this project to Heroku by clicking the button below. Set the following environment variables below according to your node environment. Environment variables PORT sets the port to run the app DB_NAME sets the database name DB_HOST sets the database host DB_TYPE sets the database type eg mysql DB_PORT sets the database connection port DB_USER sets the database user DB_PASS sets the database password NODE_ENV sets the node environment to run the app. JWT_SECRET sets your json web token secret AUTH_TOKEN sets the authentication token ADMIN_USERNAME sets the admin username ADMIN_PASSWORD sets the admin password ADMIN_FIRSTNAME sets the admin firstname ADMIN_LASTNAME sets the admin lastname ADMIN_EMAIL sets the admin email address × Search results Close "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
